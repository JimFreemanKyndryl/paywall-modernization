//CICSDEF  JOB (ACCT),'CICS DEFINITIONS',CLASS=A,MSGCLASS=X,
//         NOTIFY=&SYSUID
//*
//* CICS RESOURCE DEFINITIONS FOR PAYWALL REGISTRATION
//*
//STEP01   EXEC PGM=DFHCSDUP,REGION=0M
//STEPLIB  DD DSN=CICSTS.CICS.SDFHLOAD,DISP=SHR
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
*
* TRANSACTION DEFINITION
*
DEFINE TRANSACTION(PWRG)
       GROUP(PAYWALL)
       PROGRAM(PWREGCIC)
       TASKREQ(TERMINAL)
       DTIMOUT(30)
       RESTART(NO)
       SPURGE(NO)
       TPURGE(NO)
       DUMP(YES)
       TRACE(YES)
       PRIORITY(1)
       TRANCLASS(PAYWL)
       DESCRIPTION(Paywall Customer Registration)
*
* PROGRAM DEFINITIONS
*
DEFINE PROGRAM(PWREGCIC)
       GROUP(PAYWALL)
       LANGUAGE(COBOL)
       RELOAD(NO)
       RESIDENT(NO)
       USAGE(NORMAL)
       USELPACOPY(NO)
       STATUS(ENABLED)
       CEDF(YES)
       DATALOCATION(ANY)
       EXECKEY(USER)
       CONCURRENCY(QUASIRENT)
       DESCRIPTION(Paywall Registration CICS Program)
*
DEFINE PROGRAM(CUSTREG)
       GROUP(PAYWALL)
       LANGUAGE(COBOL)
       RELOAD(NO)
       RESIDENT(NO)
       USAGE(NORMAL)
       USELPACOPY(NO)
       STATUS(ENABLED)
       CEDF(YES)
       DATALOCATION(ANY)
       EXECKEY(USER)
       CONCURRENCY(QUASIRENT)
       DESCRIPTION(Paywall Registration Batch Program)
*
* MAPSET DEFINITION
*
DEFINE MAPSET(PWREGMAP)
       GROUP(PAYWALL)
       STATUS(ENABLED)
       RESIDENT(NO)
       USAGE(NORMAL)
       USELPACOPY(NO)
       DESCRIPTION(Paywall Registration Map)
*
* FILE DEFINITIONS FOR VSAM
*
DEFINE FILE(CUSTMAST)
       GROUP(PAYWALL)
       DSNAME(PROD.PAYWALL.CUSTOMER.MASTER)
       STATUS(ENABLED)
       OPENTIME(FIRSTREF)
       DISPOSITION(SHARE)
       DATABUFFERS(10)
       INDEXBUFFERS(5)
       TABLE(NO)
       RECORDFORMAT(V)
       ADD(YES)
       BROWSE(YES)
       DELETE(YES)
       READ(YES)
       UPDATE(YES)
       DESCRIPTION(Customer Master File)
*
DEFINE FILE(SUBMAST)
       GROUP(PAYWALL)
       DSNAME(PROD.PAYWALL.SUBSCRIPTION.MASTER)
       STATUS(ENABLED)
       OPENTIME(FIRSTREF)
       DISPOSITION(SHARE)
       DATABUFFERS(10)
       INDEXBUFFERS(5)
       TABLE(NO)
       RECORDFORMAT(V)
       ADD(YES)
       BROWSE(YES)
       DELETE(YES)
       READ(YES)
       UPDATE(YES)
       DESCRIPTION(Subscription Master File)
*
* TEMPORARY STORAGE QUEUE MODEL
*
DEFINE TSMODEL(PWTS)
       GROUP(PAYWALL)
       PREFIX(PW)
       LOCATION(AUXILIARY)
       POOLNAME(PWPOOL)
       DESCRIPTION(Paywall Temp Storage Model)
*
* TRANSIENT DATA QUEUE DEFINITIONS
*
DEFINE TDQUEUE(PWAU)
       GROUP(PAYWALL)
       TYPE(EXTRA)
       TYPEFILE(OUTPUT)
       RECORDFORMAT(V)
       BLOCKFORMAT(UNBLOCKED)
       RECORDSIZE(100)
       BLOCKSIZE(0)
       DSNAME(PROD.PAYWALL.AUDIT.QUEUE)
       DISPOSITION(SHR)
       DESCRIPTION(Paywall Audit Queue)
*
DEFINE TDQUEUE(PWER)
       GROUP(PAYWALL)
       TYPE(EXTRA)
       TYPEFILE(OUTPUT)
       RECORDFORMAT(V)
       BLOCKFORMAT(UNBLOCKED)
       RECORDSIZE(200)
       BLOCKSIZE(0)
       DSNAME(PROD.PAYWALL.ERROR.QUEUE)
       DISPOSITION(SHR)
       DESCRIPTION(Paywall Error Queue)
*
* DB2 CONNECTION DEFINITION
*
DEFINE DB2CONN(PAYWLDB)
       GROUP(PAYWALL)
       DB2ID(DB2P)
       THREADWAIT(YES)
       COMTHREADLIM(50)
       TCBLIMIT(25)
       PLAN(PAYWPLAN)
       PRIORITY(HIGH)
       SIGNID(PAYWLUSR)
       AUTHTYPE(USERID)
       DROLLBACK(YES)
       DESCRIPTION(Paywall DB2 Connection)
*
* DB2 ENTRY DEFINITIONS
*
DEFINE DB2ENTRY(PWREGENT)
       GROUP(PAYWALL)
       TRANSID(PWRG)
       PLAN(PAYWPLAN)
       THREADLIMIT(10)
       THREADWAIT(YES)
       PRIORITY(HIGH)
       PROTECTNUM(5)
       DESCRIPTION(Paywall Registration DB2 Entry)
*
* DB2 TRANSACTION DEFINITION
*
DEFINE DB2TRAN(PWRG)
       GROUP(PAYWALL)
       ENTRY(PWREGENT)
       TRANSID(PWRG)
       DESCRIPTION(Paywall Registration DB2 Transaction)
*
* INSTALL GROUP
*
INSTALL GROUP(PAYWALL)
/*
//
//* ASSEMBLE AND LINK BMS MAP
//
//ASMMAP   EXEC PROC=DFHMAPS,
//         MAPNAME=PWREGMAP,
//         RMODE=ANY,
//         AMODE=31
//SYSLIB   DD DSN=CICSTS.CICS.SDFHMAC,DISP=SHR
//         DD DSN=CICSTS.CICS.SDFHSAMP,DISP=SHR
//SYSIN    DD DSN=PROD.PAYWALL.MAPS(PWREGMAP),DISP=SHR
//SYSPUNCH DD DSN=PROD.PAYWALL.COPYLIB(PWREGMAP),
//         DISP=(NEW,CATLG),
//         UNIT=SYSDA,SPACE=(TRK,(5,5)),
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)
//